{# this is a reusable block for all places where we display a list of jobs #}
{% if jobs|length > 0 %}
    <div id="jobs">
        <table class="list" style="display: table;">
            <thead>
            <tr>
                <th>Datum</th>
                <th>Beschreibung</th>
                <th>Status</th>
                <th>Auto</th>
                <th>Ort</th>
            </tr>
            </thead>
            <tbody>
            {% for job in jobs %}
                <tr class="{{ job.status_class }}">
                    <td class="{{ job.status_class }}">
                        {{ job.wochentag }}., {{ job.time |date:"d. m." }}<br/>
                        {{ job.time |date:"d.m H:i" }} - {{ job.end_time |date:"H:i" }}||{{ job.time_stamp }}
                    </td>
                    <td><a href="/my/jobs/{{ job.id }}">
                        <strong>{{ job.typ.bereich.name }}</strong><br/>
                        {{ job.typ.get_name }}
                    </a></td>
                    <td class="status">{{ job.get_status_bohne_bar|safe }}</td>
                    <td>{{ job.get_car_status|safe }}</td>
                    <td>{{ job.typ.location }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <script type="text/javascript" src="/static/js/dable.js"></script>
    <script type="text/javascript">
        var dable = new Dable("jobs");
        dable.columnData[0].CustomRendering = function (cellValue) {
            return cellValue.split("||")[0];
        }
        dable.columnData[0].CustomSortFunc = function (columnIndex, ascending, currentRows) {
            currentRows.sort(function (a, b) {
                var a = a[0].split("||")[1];
                var b = b[0].split("||")[1];
                return ascending ? a-b : b-a;
            });
            return currentRows;
        }
        dable.UpdateDisplayedRows();        // Update the table
        dable.UpdateStyle();                // Reapply our styles
    </script>
{% else %}
    Keine Jobs ausgeschrieben
{% endif %}